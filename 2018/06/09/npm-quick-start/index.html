<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.proxy.ustclug.org/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="//cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="javascript," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />






<meta name="description" content="本文主要目的是为还在使用传统项目管理方式的前端开发者/团队，提供使用 npm 来进行组织项目的上手指南。 npm(Node Package Manager) 是 Node.js 官方的包管理工具。随着 JS 的不断发展，npm 几乎成了前端项目的管理工具，我们可以借助 npm 来进行一些前端的代码库和项目的管理。">
<meta name="keywords" content="javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="npm 快速上手">
<meta property="og:url" content="http://blog.sevenplus.me/2018/06/09/npm-quick-start/index.html">
<meta property="og:site_name" content="HakurouKen 的博客">
<meta property="og:description" content="本文主要目的是为还在使用传统项目管理方式的前端开发者/团队，提供使用 npm 来进行组织项目的上手指南。 npm(Node Package Manager) 是 Node.js 官方的包管理工具。随着 JS 的不断发展，npm 几乎成了前端项目的管理工具，我们可以借助 npm 来进行一些前端的代码库和项目的管理。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-08-11T19:44:42.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="npm 快速上手">
<meta name="twitter:description" content="本文主要目的是为还在使用传统项目管理方式的前端开发者/团队，提供使用 npm 来进行组织项目的上手指南。 npm(Node Package Manager) 是 Node.js 官方的包管理工具。随着 JS 的不断发展，npm 几乎成了前端项目的管理工具，我们可以借助 npm 来进行一些前端的代码库和项目的管理。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: false,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://blog.sevenplus.me/2018/06/09/npm-quick-start/"/>





  <title> npm 快速上手 | HakurouKen 的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">HakurouKen 的博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">A coder.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://blog.sevenplus.me/2018/06/09/npm-quick-start/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="HakurouKen">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="HakurouKen 的博客">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="HakurouKen 的博客" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                npm 快速上手
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-09T22:27:34+08:00">
                2018-06-09
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>本文主要目的是为<strong>还在使用传统项目管理方式的前端开发者/团队</strong>，提供使用 npm 来进行组织项目的上手指南。</p>
<p>npm(Node Package Manager) 是 Node.js 官方的包管理工具。随着 JS 的不断发展，npm 几乎成了前端项目的管理工具，我们可以借助 npm 来进行一些前端的代码库和项目的管理。</p>
<a id="more"></a>
<h2 id="基本指令"><a href="#基本指令" class="headerlink" title="基本指令"></a>基本指令</h2><p>我们可以在 <a href="https://docs.npmjs.com/#cli" target="_blank" rel="noopener">npm 的官方文档</a> 中查看所有指令的详细使用方式，我们这里只对最常用的指令做一个列表。</p>
<ul>
<li><code>npm install</code>： 安装该项目的所有依赖。</li>
<li><code>npm install chalk --save-dev</code>：安装第三方依赖<code>chalk</code>，并保存到开发时依赖(devDependencies)。</li>
<li><code>npm install lodash --save</code>：安装第三方<code>lodash</code>，并保存到运行时依赖(dependencies)。</li>
<li><code>npm uninstall chalk --save-dev</code>：移除第三方<code>chalk</code>，并从开发时依赖中移除(devDependencies)。</li>
<li><code>npm uninstall lodash --dev</code>：移除第三方<code>lodash</code>，并从运行时依赖中移除(dependencies)。</li>
<li><code>npm update lodash</code>：升级项目中的<code>lodash</code>。</li>
<li><code>npm publish</code>：将当前项目当作一个 npm 包发布。</li>
<li><code>npm init</code>：初始化一个基于 npm 管理的项目（生成一个 <code>package.json</code> 文件）。</li>
</ul>
<h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p>package.json 文件是 npm 包默认的配置管理方案，它也是一个 npm 项目必须有的文件。</p>
<ol>
<li>列出项目依赖的所有包。</li>
<li>指定该项目依赖的所有包的版本。</li>
<li>指定开发构建脚本。</li>
</ol>
<h3 id="name"><a href="#name" class="headerlink" title="name"></a>name</h3><p>项目对应的 npm 包名。包名必须是全小写，支持连字符/下划线，例如 <code>lodash</code>。当你的项目发布到 npm 上后，别的开发者可以使用这个名字来安装你的包（使用<code>install</code>命令）。如果你的项目不需要发布到 npm 源，可以不填。</p>
<h3 id="version"><a href="#version" class="headerlink" title="version"></a>version</h3><p>对应的项目版本，需要满足<a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noopener">semver</a>的标准，多数情况下，我们只需要知道是<strong>主版本号.次版本号.修订版本号</strong>（即 x.x.x）的格式即可。同样的，如果你不需要发布，可以不填。</p>
<h3 id="private"><a href="#private" class="headerlink" title="private"></a>private</h3><p>如果你的项目不需要发布，请务必设置 <code>private: true</code>，确保不会将你的项目误发布到 npm 源上。</p>
<h3 id="description"><a href="#description" class="headerlink" title="description"></a>description</h3><p>项目的描述。</p>
<h3 id="scripts"><a href="#scripts" class="headerlink" title="scripts"></a>scripts</h3><p>scripts 是一个 hash 对象，我们一般用它来汇总整个项目用到的所有开发、构建、部署等命令。</p>
<p>阮一峰之前写过一篇<a href="http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html" target="_blank" rel="noopener">介绍 npm script 的文章</a>，很适合入门者，我们不再过多赘述。不过要注意的是，这篇文章写作时间较早，现在有一些钩子已经进行了更新。我们可以参照官方文档的 <a href="https://docs.npmjs.com/cli/run-script" target="_blank" rel="noopener">npm-scripts</a> 和 <a href="https://docs.npmjs.com/cli/run-script" target="_blank" rel="noopener">npm-run-script</a> 进行学习。</p>
<p>虽然没有成文的规定，但是有些命令基本是我们约定俗称的，比如：</p>
<ul>
<li><code>start</code>：启动服务器，多用在服务端的项目。</li>
<li><code>dev</code>: 开发指令，多数情况下都是启动一个开发用的服务器，或者是构建一个中间产物用于开发。</li>
<li><code>build</code> 或 <code>dist</code>：构建结果代码。</li>
<li><code>lint</code>: 使用 lint 工具检查源代码。</li>
<li><code>test</code>: 单元测试/E2E 测试。</li>
</ul>
<h3 id="dependencies"><a href="#dependencies" class="headerlink" title="dependencies"></a>dependencies</h3><p>项目的依赖管理，我们使用 <code>npm install xxx --save</code> 的时候，npm 会自动把我们安装的包存在这个字段。一般情况下，请不要手动编辑。</p>
<h3 id="devDependencies"><a href="#devDependencies" class="headerlink" title="devDependencies"></a>devDependencies</h3><p>项目的开发依赖管理，我们使用 <code>npm install xxx --save-dev</code> 的时候，npm 会自动把我们安装的包存在这个字段。一般情况下，请不要手动编辑。</p>
<p>devDependencies 和 dependencies 的区别是：devDependencies 是开发代码时的依赖，而 dependencies 是代码的运行时的依赖。<br>例如：如果项目开发中用到了 webpack 打包，但是在打包完成后，我们的代码运行时并不依赖 webpack，所以 webpack 应当被添加在 devDependencies。</p>
<h3 id="main-module"><a href="#main-module" class="headerlink" title="main/module"></a>main/module</h3><p>main 用于指定入口文件，当我们使用 <code>require(&#39;module-name&#39;)</code>的时候，就会默认引入这个文件。默认是<code>index.js</code>。</p>
<p>它的作用是标识 ES6 模块的入口。当我们使用 <code>import &#39;module-name&#39;</code>的时候，默认导入的即为这个文件。module 目前不是一个标准的字段，但是打包工具 webpack 和 rollup 都可以识别这个字段。更多的关于这个字段的详细信息，可以在这个 StackOverflow 的<a href="https://stackoverflow.com/questions/42708484/what-is-the-module-package-json-field-for#answer-42817320" target="_blank" rel="noopener">回答</a>下查看。</p>
<h2 id="全局与本地"><a href="#全局与本地" class="headerlink" title="全局与本地"></a>全局与本地</h2><p>在使用 <code>install</code> 指令安装包的时候，我们可以使用 <code>-g</code> 参数将包装到 npm 全局，这对一些命令行工具非常实用。但是对于我们的项目的开发依赖（例如 webpack/rollup），建议还是全部装到项目本地，这样有利于每个项目独立管理依赖版本。<br>在 node 8+ 之后的版本，会自动安装 <code>npx</code>，它可以方便的执行项目内的二进制包，可以在一定程度上替代全局安装。</p>
<h2 id="锁"><a href="#锁" class="headerlink" title="锁"></a>锁</h2><p>如果你注意观察，会发现 npm 的依赖中，默认所有的包的版本都是类似<code>^1.0.4</code>的这种格式：这在 semver 规范中代表着，我们只严格限制主版本号为<code>1</code>、次版本号为<code>0</code>，只要修订版本大于等于<code>4</code>，即可满足当前要求。在理想状况下，<code>1.0.5</code> 和 <code>1.0.6</code> 的版本发布，并不会引入新的问题，我们业务可以放心的升级。但是现实中，一个依赖的小版本升级有可能会引入一些额外的问题，上层没有任何的保护机制来处理这种第三方库引入的 BUG。</p>
<p>在新版本的 node 中，<code>npm install</code> 会默认生成一个锁文件 <code>package-lock.json</code>。这个 <code>package-lock.json</code> 中，记录了我们直接和间接引入的所有包的版本、安装源以及 hash。有了这个文件，就可以保证在所有的机器上使用 <code>npm install</code> 会得到相同的结果。因此，我们应当<strong>将 package-lock.json 纳入版本管理中</strong>。</p>
<h2 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h2><p>yarn 是一个 Facebook 提出的替代 npm 的包管理器。比起 npm 来讲，它最大的优势就是安装速度快。尤其是用于 CI 时，安装速度占了整个集成时间的一大部分，优化安装速度可以显著提高整个 CI 的集成速度。</p>
<p>再的详细使用方法和 npm 类似，这里不再赘述，可以参考<a href="https://yarnpkg.com/zh-Hans/docs/usage" target="_blank" rel="noopener">官方的快速上手指南</a>。<br><strong>注意：</strong>一个项目中，请仅使用一个工具来管理包，用了 yarn 就不要用 npm，反之亦然。如果你适用了 yarn 管理包，务必把 yarn.lock （yarn 的版本锁文件，效果和 <code>package-lock.json</code> 类似）这个文件纳入版本管理，并且可以把 package-lock.json 纳入 ignore 列表，反之则相反。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/javascript/" rel="tag"># javascript</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/09/eslint-best-practices-for-beginner/" rel="next" title="给初学者的 eslint 指南">
                <i class="fa fa-chevron-left"></i> 给初学者的 eslint 指南
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/06/25/how-to-share-codes-between-projects/" rel="prev" title="如何在跨项目复用代码">
                如何在跨项目复用代码 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="HakurouKen" />
          <p class="site-author-name" itemprop="name">HakurouKen</p>
          <p class="site-description motion-element" itemprop="description">↑ P站ID=55398733</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives/">
              <span class="site-state-item-count">50</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags/">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本指令"><span class="nav-number">1.</span> <span class="nav-text">基本指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#package-json"><span class="nav-number">2.</span> <span class="nav-text">package.json</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#name"><span class="nav-number">2.1.</span> <span class="nav-text">name</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#version"><span class="nav-number">2.2.</span> <span class="nav-text">version</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#private"><span class="nav-number">2.3.</span> <span class="nav-text">private</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#description"><span class="nav-number">2.4.</span> <span class="nav-text">description</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scripts"><span class="nav-number">2.5.</span> <span class="nav-text">scripts</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dependencies"><span class="nav-number">2.6.</span> <span class="nav-text">dependencies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#devDependencies"><span class="nav-number">2.7.</span> <span class="nav-text">devDependencies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#main-module"><span class="nav-number">2.8.</span> <span class="nav-text">main/module</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#全局与本地"><span class="nav-number">3.</span> <span class="nav-text">全局与本地</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#锁"><span class="nav-number">4.</span> <span class="nav-text">锁</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yarn"><span class="nav-number">5.</span> <span class="nav-text">yarn</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        

<div class="busuanzi-count" id="busuanzi_container_site_pv" style="display:none;">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  

</div>



        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-flask"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">HakurouKen</span>
</div>

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>











  
  <script type="text/javascript" src="//cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="//cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="//cdn.bootcss.com/velocity/1.2.1/velocity.min.js"></script>

  
  <script type="text/javascript" src="//cdn.bootcss.com/velocity/1.2.1/velocity.ui.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js"></script>

  <script type="text/javascript" src="/js/src/motion.js"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js"></script>
<script type="text/javascript" src="/js/src/post-details.js"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js"></script>



  



  




	




  
  

  

  

  

  


</body>
</html>
